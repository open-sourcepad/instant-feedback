.col-md-12.p-0.bg-brown([ng2-loading]="loadingPending")
  .row
    .col-md-9.m-auto
      .mt-5
        h3.font-bold.text-brown Requests for Feedback
        br
        ng-container(*ngIf="requests.length > 0")
          .requestee-container(*ngFor="let request of requests")
            .requestee-content.inline-block
              span.text-muted.font-size-13 {{ request.created_at | datePrettyFormat }}
              br
              .requestee-give-feedback
                span.text-indigo.font-bold {{ request.recipient.name }}&nbsp;
                span.font-semi-bold has requested for your feedback.
            button.btn-instant-feedback.btn-sm.btn-instant-feedback-semi-dark((click)="sideMenuState = 'in'; feedbackState = 'give'; requestedFeedback = request") Give Feedback
        ng-container(*ngIf="requests.length < 1")
          .requestee-container
            .requestee-content.inline-block
              .requestee-give-feedback
                span.font-semi-bold.text-idle No feedback requests
        br

.col-md-12.p-0.bg-lightbrown([ng2-loading]="loading")
  .row
    .col-md-9.m-auto
      #feedback-filters.mt-3
        label.font-bold.text-idle Dates&nbsp;&nbsp;&nbsp;
        .date-range.inline-block
          span.font-bold {{ this.daterange.start | date : 'MMMM d, y'}} - {{ this.daterange.end | date : 'MMMM d, y'}}&nbsp;&nbsp;
          button.btn.btn-instant-feedback.btn-daterange(daterangepicker, [options]="options", (selected)="selectedDate($event, daterange)")
            span.icon-holder.ti-calendar
            | &nbsp;
            span.icon-holder.ti-angle-down
        
        label.font-bold.text-idle.ml-4 User&nbsp;&nbsp;
        select.form-control.inline-block.w-auto([(ngModel)]="selectedUser", (change)="loadFeedbacks()")
          option(value="") ALL
          option(*ngFor="let user of users", [value]="user.id") {{ user.display_name }}
      .mt-3.mb-3
        ul.reset.user-overview-options
          li.is-active
            button([class.active]="currentTab == 'received'", (click)="changeTab('received')") From Your Team
          li.is-active
            button([class.active]="currentTab == 'given'", (click)="changeTab('given')") To Your Team

      .mt-3.feedback-list
        ng-container(*ngIf="collection.length > 0")
          .feedback(*ngFor="let obj of collection | paginate: paginationControls")
            span.text-idle.font-size-12 {{ obj.updated_at | datePrettyFormat }}
            br
            ng-container(*ngIf="currentTab == 'received'")
              span.font-bold.text-indigo {{ obj.sender }}&nbsp;
              span said
              span.text-idle(*ngIf="obj.question") &nbsp;(in response to your feedback request)
            ng-container(*ngIf="currentTab == 'given'")
              span.font-bold.text-indigo You&nbsp;
              span said to {{ obj.recipient.name }}
              span.text-idle(*ngIf="obj.question") &nbsp;(in response to {{ obj.recipient.preposition }} feedback request)
            span :
            p.text-justify "{{ obj.comment }}"
            .text-right
              button.btn-action.font-size-14.font-bold((click)="toggleShowFeedback('in'); selectedFeedback = obj") More
        ng-container(*ngIf="collection.length < 1")
          .feedback.text-center
            span.font-bold No feedbacks yet.
      pagination(*ngIf="collection.length > 0", [config]="paginationControls", (pageChange)="pageChange($event)")


modal(
  [(visible)]="showModal",
  [(modalText)]="modalText",
  [(buttons)]="modalButtons",
  (modalStateChange)="modalStateChange($event)"
)

side-menu(
  [(menuState)]="sideMenuState",
  [feedbackState]="'give'",
  [(form)]="feedbackForm",
  (cancel)="toggleSideMenuState($event)",
  (submitFeedback)="submitFeedback($event)"
)
  form(feedback="give", [formGroup]="feedbackForm", novalidate, autocomplete="off", (ngSubmit)="submitFeedback(feedbackForm.value)")
    span.text-muted.font-size-13 {{ requestedFeedback?.created_at | datePrettyFormat }}
    .form-header-text {{ requestedFeedback?.recipient.name }} requested you to give feedback with this question:
    br
    h2.font-bold.text-brown {{ requestedFeedback?.question }}
    br
    br
    .form-group-box
      textarea.form-control.form-control-line([class.is-invalid]="submitted && f.comment.errors", type="text", formControlName="comment")
      label Your feedback
      .invalid-feedback
        span Please enter your feedback

side-menu(
  [(menuState)]="showFeedback",
  (cancel)="toggleShowFeedback($event)"
)
  ng-container(*ngIf="selectedFeedback?.question")
    span.text-idle {{ selectedFeedback?.created_at | datePrettyFormat }}
    .form-header-text(*ngIf="currentTab == 'received'") You requested&nbsp;
      span.text-indigo.font-bold {{ selectedFeedback?.sender }}&nbsp;
      | to give you feedback with this question:
    .form-header-text(*ngIf="currentTab == 'given'") {{ selectedFeedback?.recipient.name }} requested&nbsp;
      span.text-indigo.font-bold you&nbsp;
      | to give your feedback with this question:
    br
    span.feedback-question.text-brown {{ selectedFeedback?.question }}
    br
    br
    br
  .form-header-text.text-idle(*ngIf="currentTab == 'received'") {{ selectedFeedback?.sender }}'s feedback:
  .form-header-text.text-idle(*ngIf="currentTab == 'given'") Your feedback:
  br
  span.text-idle {{ selectedFeedback?.updated_at | datePrettyFormat }}
  p.feedback-comment {{ selectedFeedback?.comment }}
